{% extends "base.html" %}

{% block title %}Error - An√°lisis de Volumen{% endblock %}

{% block content %}
<div class="error-container">
    <div class="error-header">
        <div class="error-icon">‚ö†Ô∏è</div>
        <h1>Error en el An√°lisis de Volumen</h1>
    </div>
    
    <div class="error-content">
        <div class="error-message">
            <h3>No se pudo completar el an√°lisis</h3>
            <p>{{ error }}</p>
        </div>
        
        {% if details %}
        <div class="error-details">
            <details>
                <summary>Ver detalles del error</summary>
                <div class="error-list">
                    {% for detail in details %}
                    <div class="error-item">{{ detail }}</div>
                    {% endfor %}
                </div>
            </details>
        </div>
        {% endif %}
        
        <div class="error-suggestions">
            <h4>Posibles soluciones:</h4>
            <ul>
                <li>üîë <strong>Credenciales:</strong> Verifica que todas las credenciales de Google Ads est√©n configuradas correctamente</li>
                <li>üîÑ <strong>Tokens:</strong> Aseg√∫rate de que el refresh token est√© actualizado y sea v√°lido</li>
                <li>üí≥ <strong>Cuenta:</strong> Verifica que tu cuenta de Google Ads est√© activa y tenga acceso a la API</li>
                <li>üåê <strong>Permisos:</strong> Confirma que la cuenta tenga permisos para usar Keyword Planner</li>
                <li>üìä <strong>L√≠mites:</strong> Puede que hayas alcanzado el l√≠mite de solicitudes de la API</li>
            </ul>
        </div>
        
        <div class="config-instructions">
            <h4>üìã Configuraci√≥n necesaria:</h4>
            <p>Aseg√∫rate de tener configuradas las siguientes variables de entorno:</p>
            <ul>
                <li><code>GOOGLE_ADS_DEVELOPER_TOKEN</code></li>
                <li><code>GOOGLE_ADS_REFRESH_TOKEN</code></li>
                <li><code>GOOGLE_ADS_CLIENT_ID</code></li>
                <li><code>GOOGLE_ADS_CLIENT_SECRET</code></li>
                <li><code>GOOGLE_ADS_CUSTOMER_ID</code> (opcional)</li>
                <li><code>GOOGLE_ADS_LOGIN_CUSTOMER_ID</code> (opcional, para cuentas MCC)</li>
            </ul>
        </div>
        
        <div class="error-actions">
            <a href="/keyword-volume" class="button">üîÑ Intentar de nuevo</a>
            <a href="/keyword-volume/check-config" class="button secondary">üîß Verificar configuraci√≥n</a>
            <a href="/" class="button secondary">üè† Volver al inicio</a>
        </div>
    </div>
</div>

<style>
.error-list {
    background-color: #f8f9fa;
    padding: 1rem;
    border-radius: 4px;
    margin-top: 1rem;
    max-height: 300px;
    overflow-y: auto;
}

.error-item {
    padding: 0.5rem;
    margin-bottom: 0.5rem;
    background-color: white;
    border-left: 3px solid #dc3545;
    border-radius: 0 4px 4px 0;
    font-family: monospace;
    font-size: 0.9rem;
}

.config-instructions {
    background-color: #d1ecf1;
    border: 1px solid #bee5eb;
    border-radius: 8px;
    padding: 1.5rem;
    margin-bottom: 2rem;
}

.config-instructions code {
    background-color: #f8f9fa;
    padding: 0.2rem 0.4rem;
    border-radius: 3px;
    font-family: monospace;
    font-size: 0.9rem;
}
</style>
{% endblock %}